<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.14/css/jquery.dataTables.min.css">
    <link rel="stylesheet"  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css">
    <!-- modal -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    

</head>
<body>
    
    <ng-container *ngIf="student">

        <section class="card-att">
            <div class="layer-stu">
                
            </div>
            <div class="row justify-content-center sturow no-gutters">
                <div class="col-lg-4 col-md-6 col-sm-6 stucard">
                    <div class="img-name">
                        <img src="../../../assets/labeled_images/{{user.id}}/profile.png" alt="profile Image">
                        <h2 class="nameofstu ">{{user.first_name}} {{user.last_name}}</h2>
                    </div>
                    <div class="row">
                        <h3 class="col-6 data-row"> Level : {{user.level}}</h3>
                        <h3 class ="col-6 data-row">ID : {{user.id}}</h3>
                    
                    </div>
                    <div class="row justify-content-center bar-att-row">
                        <div role="progressbarstu" aria-valuenow="" aria-valuemin="0" aria-valuemax="100" style="--value: {{(students[0].attendance[0].count/12)*100 |number:'1.0-0'}}"></div>

                    </div>
                
                </div>
                
            </div>
        </section>

    </ng-container>

    <ng-container *ngIf="doctor">
        <section  class="sec-doc">
            <div class="layer-att-doc">
        
            </div>
        <div class="container-fluid  pr-4">
        <div class="row ">
        
            <div class="col-md-8 card-cont">
                <div class="row card-row">
                    <div class="tb  main-datatable">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-sm-12 add_flex">
                                    <div class="form-group searchInput">
                                        <label for="email">Search:</label>
                                        <input type="search" class="form-control"  placeholder=" " [(ngModel)]="searchText" >
                                    </div>
                                </div> 
                            </div>
                        
                            <table class="table  dataTable no-footer table-hover">
                                <thead>
                                    <tr>
                                        <th>Id</th>
                                        <th colspan="3">Name</th>
                                        <th>Attendacne</th>
                                        <th>Add</th>
                                        
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let s of students | filter:searchText ; let i=index">
                                        <td>{{s.id}}</td>
                                        <td colspan="3">{{s.first_name}} {{s.last_name}}</td>
                                        <td><span  class="mode mode_done">
                                            {{s.attendance[0] ? ((s.attendance[0].count/12)*100 |number:'1.0-0') : 0}}%         
                                        </span></td>
                                        <td>
                                            <button type="button" class="btn btn-primary mode mode_done"   (click)="markAttendance(s.id)" *ngIf="errId!=s.id">
                                                <i class="fa-solid fa-circle-plus" style="margin-right: 5px;" ></i>Add Attendance                           
                                            </button>
                                            <button type="button" class="btn btn-danger mode"  *ngIf="errId==s.id">
                                                <i  style="margin-right: 5px;" ></i>Already 100%!                          
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                    </div>
                </div>
                </div>

            </div>
        
            <div class="col-md-4 col-sm-11 col-11 bar-cont ">
                <div class="row con-row">
                    <div class=" col">
                            <!-- 0% -->
                            <div class="progress-title">
                                <h3>{{p0.length}} student</h3>
                            </div>
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped progress-bar-animated  bg-danger" role="progressbar" style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"><span>0%</span></div>
                            </div>
                            <!-- 25% -->
                            <div class="progress-title">
                                <h3>{{p25.length}} student</h3>
                            </div>
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped progress-bar-animated  bg-warning" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"><span>25%</span></div>
                            </div>
                            <!-- 50% -->
                            <div class="progress-title">
                                <h3>{{p50.length}}  Student</h3>
                            </div>
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped progress-bar-animated  bg-info" role="progressbar" style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"><span>50%</span></div>
                            </div>
                            <!-- 75% -->
                            <div class="progress-title">
                                <h3>{{p75.length}} Student</h3>
                            </div>
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped progress-bar-animated " role="progressbar" style="width: 75%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"><span>75%</span></div>
                            </div>
                            <!-- 100% -->
                            <div class="progress-title">
                                <h3>{{p100.length}} Student</h3>
                            </div>
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped progress-bar-animated bg-success" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"><span>100%</span></div>
                            </div>

                    </div>
                </div>
            </div>
        </div>
        </div>
    </section>
    </ng-container>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <script src="https://cdn.datatables.net/1.10.14/js/jquery.dataTables.min.js"></script>
    
</body>